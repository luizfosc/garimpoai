<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GarimpoAI Dashboard</title>

  <!-- Google Fonts: Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet"
  />

  <!-- Tailwind CSS v3 CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', '-apple-system', 'sans-serif'],
          },
          colors: {
            primary: '#D4A017',
            'primary-dark': '#B8860B',
          },
        },
      },
    };
  </script>

  <style>
    /* Sidebar mobile transition */
    #sidebar {
      transition: transform 0.3s ease-in-out;
    }

    #sidebar-overlay {
      transition: opacity 0.3s ease-in-out;
    }

    /* Custom scrollbar for main content */
    #main-content::-webkit-scrollbar {
      width: 6px;
    }

    #main-content::-webkit-scrollbar-track {
      background: transparent;
    }

    #main-content::-webkit-scrollbar-thumb {
      background-color: rgba(0, 0, 0, 0.12);
      border-radius: 3px;
    }

    #main-content::-webkit-scrollbar-thumb:hover {
      background-color: rgba(0, 0, 0, 0.2);
    }
  </style>
</head>

<body class="font-sans antialiased bg-slate-50 text-slate-800">
  <div class="flex h-screen overflow-hidden">

    <!-- Mobile sidebar overlay -->
    <div
      id="sidebar-overlay"
      class="fixed inset-0 z-20 bg-black/50 opacity-0 pointer-events-none md:hidden"
      onclick="closeSidebar()"
    ></div>

    <!-- Sidebar -->
    <aside
      id="sidebar"
      class="fixed inset-y-0 left-0 z-30 w-64 flex-shrink-0 hidden md:flex flex-col bg-slate-800 transform -translate-x-full md:translate-x-0 md:static md:z-auto"
    >
      <!-- Logo / Branding -->
      <div class="flex items-center gap-3 px-5 py-5 border-b border-slate-700/60">
        <span class="text-2xl" role="img" aria-label="Pickaxe">&#x26CF;&#xFE0F;</span>
        <div>
          <h1 class="text-lg font-bold tracking-tight text-white">GarimpoAI</h1>
          <p class="text-[11px] text-slate-400 -mt-0.5 tracking-wide">Dashboard</p>
        </div>
      </div>

      <!-- Navigation -->
      <nav class="flex-1 px-3 py-4 space-y-1 overflow-y-auto">
        <a href="#overview" data-nav="#overview"
           class="flex items-center gap-3 px-4 py-2.5 text-sm text-slate-300 hover:bg-slate-700/30 border-l-2 border-transparent transition-colors rounded-r-lg">
          <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
          Visao Geral
        </a>

        <a href="#licitacoes" data-nav="#licitacoes"
           class="flex items-center gap-3 px-4 py-2.5 text-sm text-slate-300 hover:bg-slate-700/30 border-l-2 border-transparent transition-colors rounded-r-lg">
          <i data-lucide="search" class="w-5 h-5"></i>
          Licitacoes
        </a>

        <a href="#alertas" data-nav="#alertas"
           class="flex items-center gap-3 px-4 py-2.5 text-sm text-slate-300 hover:bg-slate-700/30 border-l-2 border-transparent transition-colors rounded-r-lg">
          <i data-lucide="bell" class="w-5 h-5"></i>
          Alertas
        </a>

        <a href="#compliance" data-nav="#compliance"
           class="flex items-center gap-3 px-4 py-2.5 text-sm text-slate-300 hover:bg-slate-700/30 border-l-2 border-transparent transition-colors rounded-r-lg">
          <i data-lucide="shield-check" class="w-5 h-5"></i>
          Compliance
        </a>

        <a href="#sistema" data-nav="#sistema"
           class="flex items-center gap-3 px-4 py-2.5 text-sm text-slate-300 hover:bg-slate-700/30 border-l-2 border-transparent transition-colors rounded-r-lg">
          <i data-lucide="settings" class="w-5 h-5"></i>
          Sistema
        </a>
      </nav>

      <!-- Sidebar footer -->
      <div class="px-5 py-3 border-t border-slate-700/60">
        <p class="text-xs text-slate-500">v0.1.0 &middot; Fase 3</p>
      </div>
    </aside>

    <!-- Main area -->
    <div class="flex flex-1 flex-col min-w-0">

      <!-- Top bar -->
      <header class="flex items-center gap-3 px-4 py-3 bg-white border-b border-slate-200">
        <!-- Hamburger (mobile only) -->
        <button
          id="menu-btn"
          onclick="openSidebar()"
          class="p-1.5 rounded-md text-slate-600 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-primary/40 md:hidden"
          aria-label="Abrir menu"
        >
          <i data-lucide="menu" class="w-5 h-5"></i>
        </button>

        <!-- Page title / breadcrumb -->
        <h2 id="page-title" class="text-base font-semibold text-slate-700">Dashboard</h2>
      </header>

      <!-- Content -->
      <main id="main-content" class="flex-1 overflow-y-auto bg-slate-50 min-h-screen">
        <div id="app" class="p-6">
          <!-- SPA content rendered here by app.js -->
          <div class="flex flex-col items-center justify-center min-h-[60vh] text-slate-400">
            <i data-lucide="loader-2" class="w-8 h-8 animate-spin mb-4 text-primary"></i>
            <p class="text-sm">Carregando dashboard...</p>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

  <!-- Router and sidebar logic -->
  <script>
    // ── Hash-based router ──────────────────────────────────────────────
    function navigate(hash) {
      window.location.hash = hash;
    }

    function setActiveNav(hash) {
      document.querySelectorAll('[data-nav]').forEach(function (el) {
        var isActive = el.dataset.nav === hash;
        el.classList.toggle('bg-slate-700/50', isActive);
        el.classList.toggle('border-amber-500', isActive);
        el.classList.toggle('border-transparent', !isActive);
      });

      var titles = {
        '#overview': 'Visao Geral',
        '#licitacoes': 'Licitacoes',
        '#alertas': 'Alertas',
        '#compliance': 'Compliance',
        '#sistema': 'Sistema',
      };

      var titleEl = document.getElementById('page-title');
      if (titleEl) {
        titleEl.textContent = titles[hash] || 'Dashboard';
      }
    }

    // ── Sidebar toggle (mobile) ────────────────────────────────────────
    function openSidebar() {
      var sidebar = document.getElementById('sidebar');
      var overlay = document.getElementById('sidebar-overlay');
      sidebar.classList.remove('hidden', '-translate-x-full');
      sidebar.classList.add('flex');
      overlay.classList.remove('opacity-0', 'pointer-events-none');
    }

    function closeSidebar() {
      var sidebar = document.getElementById('sidebar');
      var overlay = document.getElementById('sidebar-overlay');
      sidebar.classList.add('-translate-x-full');
      overlay.classList.add('opacity-0', 'pointer-events-none');
      // Re-hide after transition completes on mobile
      setTimeout(function () {
        if (window.innerWidth < 768) {
          sidebar.classList.add('hidden');
          sidebar.classList.remove('flex');
        }
      }, 300);
    }

    // ── Event listeners ────────────────────────────────────────────────
    window.addEventListener('hashchange', function () {
      var hash = window.location.hash || '#overview';
      setActiveNav(hash);
      closeSidebar();
    });

    document.addEventListener('DOMContentLoaded', function () {
      // Set default hash if none
      if (!window.location.hash || window.location.hash === '#') {
        window.location.hash = '#overview';
      }
      setActiveNav(window.location.hash);

      // Initialize Lucide icons
      if (window.lucide) {
        lucide.createIcons();
      }
    });
  </script>

  <!-- Application JS -->
  <script src="app.js"></script>
</body>
</html>
